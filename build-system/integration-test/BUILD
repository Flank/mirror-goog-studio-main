load("//tools/base/bazel:maven.bzl", "maven_repo")
load("//tools/base/bazel:groovy.bzl", "groovy_jar")
load("//tools/base/bazel:kotlin.bzl", "kotlin_library", "kotlin_test")

java_library(
    name = "protos",
    srcs = ["//tools/base/build-system/integration-test/src/main/proto:proto_srcs"],
    deps = [
        "//tools/analytics-library/protos/src/main/proto",
        "//tools/base/third_party:com.google.protobuf_protobuf-java",
    ],
)

kotlin_library(
    name = "integration-test",
    srcs = ["src/main/java"],
    deps = [
        ":protos",
        "//tools/analytics-library/protos/src/main/proto",
        "//tools/apksig",
        "//tools/base/annotations",
        "//tools/base/build-system:gradle-api",
        "//tools/base/build-system:tools.builder-test-api",
        "//tools/base/build-system/builder",
        "//tools/base/build-system/builder-model",
        "//tools/base/build-system/gradle",
        "//tools/base/build-system/gradle-api",
        "//tools/base/build-system/gradle-core",
        "//tools/base/build-system/gradle-experimental",
        "//tools/base/build-system/java-lib-plugin/java-lib-model",
        "//tools/base/build-system/java-lib-plugin/java-lib-model-builder",
        "//tools/base/common:tools.common",
        "//tools/base/ddmlib:tools.ddmlib",
        "//tools/base/instant-run:instant-run-client",
        "//tools/base/instant-run:instant-run-common",
        "//tools/base/layoutlib-api:tools.layoutlib-api",
        "//tools/base/repository:tools.repository",
        "//tools/base/sdk-common:tools.sdk-common",
        "//tools/base/sdklib:tools.sdklib",
        "//tools/base/testing-infrastructure/device-pool/device-provider",
        "//tools/base/testutils:tools.testutils",
        "//tools/base/third_party:com.google.apis_google-api-services-storage",
        "//tools/base/third_party:com.google.protobuf_protobuf-java",
        "//tools/base/third_party:com.google.protobuf_protobuf-java-util",
        "//tools/base/third_party:com.google.truth_truth",
        "//tools/base/third_party:commons-io_commons-io",  # TODO: remove?
        "//tools/base/third_party:commons-lang_commons-lang",  # TODO: remove?
        "//tools/base/third_party:org.jacoco_org.jacoco.agent",
        "//tools/base/third_party:org.jacoco_org.jacoco.core",
        "//tools/base/third_party:org.jacoco_org.jacoco.report",
        "//tools/base/third_party:org.ow2.asm_asm",
        "//tools/base/third_party:org.ow2.asm_asm-tree",
        "//tools/base/third_party:org.smali_dexlib2",
    ],
)

TEST_DEPS = [
    ":integration-test",
    "//tools/apksig",
    "//tools/base/annotations",
    "//tools/base/build-system:gradle-api",
    "//tools/base/build-system:tools.builder-test-api",
    "//tools/base/build-system/builder",
    "//tools/base/build-system/builder-model",
    "//tools/base/build-system/gradle-api",
    "//tools/base/build-system/gradle-core",
    "//tools/base/build-system/gradle-experimental",
    "//tools/base/build-system/java-lib-plugin/java-lib-model",
    "//tools/base/build-system/java-lib-plugin/java-lib-model-builder",
    "//tools/base/common:tools.common",
    "//tools/base/ddmlib:tools.ddmlib",
    "//tools/base/instant-run:instant-run-client",
    "//tools/base/repository:tools.repository",
    "//tools/base/sdk-common:tools.sdk-common",
    "//tools/base/sdklib:tools.sdklib",
    "//tools/base/testutils:tools.testutils",
    "//tools/base/third_party:com.google.guava_guava",
    "//tools/base/third_party:com.google.protobuf_protobuf-java",
    "//tools/base/third_party:com.google.protobuf_protobuf-java-util",
    "//tools/base/third_party:com.google.truth_truth",
    "//tools/base/third_party:commons-io_commons-io",  # TODO: remove?
    "//tools/base/third_party:org.codehaus.groovy_groovy-all",
    "//tools/base/third_party:org.mockito_mockito-core",
    "//tools/base/third_party:org.ow2.asm_asm",
    "//tools/base/third_party:org.ow2.asm_asm-tree",
    "//tools/base/third_party:org.smali_dexlib2",
]

TEST_DATA = [
    ":prebuilts_repo_repo.zip",
    ":test-projects",
    "@AntennaPod//:all_files",
    "@gradle_perf_android_medium//:all_files",
    "@android_studio_gradle_test//:all_files",
    "//prebuilts/studio/sdk:add-ons/addon-google_apis-google-latest",
    "//prebuilts/studio/sdk:build-tools/24.0.3",
    "//prebuilts/studio/sdk:build-tools/minimum",
    "//prebuilts/studio/sdk:build-tools/latest",
    "//prebuilts/studio/sdk:build-tools/latest-preview",
    "//prebuilts/studio/sdk:cmake",
    "//prebuilts/studio/sdk:constraint-layout_latest",
    "//prebuilts/studio/sdk:databinding_latest",
    "//prebuilts/studio/sdk:espresso_latest",
    "//prebuilts/studio/sdk:gms_latest",
    "//prebuilts/studio/sdk:multidex",
    "//prebuilts/studio/sdk:ndk-bundle",
    "//prebuilts/studio/sdk:platform-tools",
    "//prebuilts/studio/sdk:platforms/android-19",
    "//prebuilts/studio/sdk:platforms/android-21",
    "//prebuilts/studio/sdk:platforms/android-23",
    "//prebuilts/studio/sdk:platforms/android-24",
    "//prebuilts/studio/sdk:platforms/latest-preview",
    "//prebuilts/studio/sdk:platforms/latest",
    "//prebuilts/studio/sdk:support_latest",
    "//prebuilts/studio/sdk:uiautomator_latest",
    "//prebuilts/studio/sdk:test-runner_latest",
    "//prebuilts/tools/common/cmake:cmake-3.8.2",
    "//tools/base/bazel:offline_repo_repo.zip",
    "//tools/base/build-system:gradle-distrib",
]

# TODO: Compile Groovy test as well (or just move all of them to Java).
java_library(
    name = "java_tests",
    srcs = glob(
        [
            "src/test/java/**/*.java",
            "src/test/groovy/**/*.java",
        ],
        exclude = [
            "src/test/java/**/CheckAll*",
            "src/test/java/**/performance/**",
        ],
    ),
    resources = glob(["src/test/resources/**"]),
    deps = TEST_DEPS,
)

java_test(
    name = "tests",
    timeout = "eternal",
    data = TEST_DATA,
    jvm_flags = [
        "-Dtest.suite.jar=tests.jar",
        "-Dfile.encoding=UTF-8",
        "-Dsun.jnu.encoding=UTF-8",
        "-Dmaven.repo.local=/tmp/localMavenRepo",  # For gradle publishing, writing to ~/.m2
        "-Dtest.excludeCategories=com.android.build.gradle.integration.common.category.DeviceTests,com.android.build.gradle.integration.common.category.DeviceTestsQuarantine,com.android.build.gradle.integration.common.category.OnlineTests",
    ],
    shard_count = 8,  # Keep this in sync with logic in our bazel launcher script and CheckAllRunner.
    tags = [
        "block-network",
        "cpu:3",
        "gradle_integration",
        "slow",
    ],
    test_class = "com.android.build.gradle.integration.BazelIntegrationTestsSuite",
    runtime_deps = [
        # Need to put this on the classpath before TestRunner_deploy.jar which contains
        # old JUnit classes. See https://github.com/bazelbuild/bazel/issues/2146.
        "//tools/base/third_party:junit_junit",
        ":java_tests",
    ],
)

# Test that builds and lints all test projects, without any additional assertions.
java_test(
    name = "automatic-tests",
    timeout = "eternal",
    srcs = glob(["src/test/java/**/CheckAll.java"]),
    data = TEST_DATA,
    jvm_flags = [
        "-Dtest.suite.jar=automatic-tests.jar",
    ],
    shard_count = 8,  # Keep this in sync with logic in our bazel launcher script and CheckAllRunner.
    tags = [
        "block-network",
        "cpu:3",
        "gradle_integration",
        "slow",
    ],
    test_class = "com.android.build.gradle.integration.BazelIntegrationTestsSuite",
    runtime_deps = [
        # Need to put this on the classpath before TestRunner_deploy.jar which contains
        # old JUnit classes. See https://github.com/bazelbuild/bazel/issues/2146.
        "//tools/base/third_party:junit_junit",
    ],
    deps = TEST_DEPS,
)

filegroup(
    name = "test-projects",
    srcs = glob(["test-projects/**"]),
)

# Maven repo with all the dependencies required by test projects.
#
# Quick way of updating this list:
# - Run the new test with bazel
# - Copy the output log to $PWD/test.log
# - Run this command:
# grep -F '> Could not find' test.log \
#   | sed -e 's:> Could not find :"//prebuilts/tools/common/m2/repository/:' \
#   | sed -e 's/:/\//g' \
#   | sed -e 's/\.$/:jar",/' \
#   | sed -e 's/\([a-z]\)\.\([a-z]\)/\1\/\2/g'
maven_repo(
    name = "prebuilts_repo",
    # keep sorted
    artifacts = [
        "//prebuilts/tools/common/m2/repository/backport-util-concurrent/backport-util-concurrent/3.1:jar",
        "//prebuilts/tools/common/m2/repository/classworlds/classworlds/1.1-alpha-2:jar",
        "//prebuilts/tools/common/m2/repository/com/almworks/sqlite4java/sqlite4java/0.282:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-acm/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-api-gateway/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-applicationautoscaling/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-autoscaling/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-cloudformation/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-cloudfront/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-cloudhsm/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-cloudsearch/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-cloudtrail/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-cloudwatch/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-cloudwatchmetrics/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-codecommit/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-codedeploy/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-codepipeline/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-cognitoidentity/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-cognitoidp/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-cognitosync/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-config/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-core/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-datapipeline/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-devicefarm/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-directconnect/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-directory/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-discovery/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-dms/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-dynamodb/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-ec2/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-ecr/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-ecs/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-efs/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-elasticache/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-elasticbeanstalk/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-elasticloadbalancing/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-elasticsearch/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-elastictranscoder/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-emr/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-events/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-gamelift/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-glacier/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-iam/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-importexport/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-inspector/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-iot/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-kinesis/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-kms/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-lambda/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-logs/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-machinelearning/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-marketplacecommerceanalytics/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-marketplacemeteringservice/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-opsworks/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-rds/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-redshift/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-route53/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-s3/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-servicecatalog/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-ses/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-simpledb/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-simpleworkflow/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-sns/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-sqs/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-ssm/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-storagegateway/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-sts/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-support/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-swf-libraries/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-waf/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk-workspaces/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/amazonaws/aws-java-sdk/1.11.18:jar",
        "//prebuilts/tools/common/m2/repository/com/andkulikov/transitionseverywhere/1.6.9:aar",
        "//prebuilts/tools/common/m2/repository/com/android/support/multidex-instrumentation/1.0.2:aar",
        "//prebuilts/tools/common/m2/repository/com/android/support/multidex/1.0.2:aar",
        "//prebuilts/tools/common/m2/repository/com/android/support/support-annotations/24.0.0:jar",
        "//prebuilts/tools/common/m2/repository/com/android/support/support-annotations/25.4.0:jar",
        "//prebuilts/tools/common/m2/repository/com/android/support/support-v4/24.0.0:aar",
        "//prebuilts/tools/common/m2/repository/com/android/support/test/orchestrator/1.0.0:apk",
        "//prebuilts/tools/common/m2/repository/com/android/support/test/runner/1.0.0:aar",
        "//prebuilts/tools/common/m2/repository/com/android/support/test/services/test-services/1.0.0:apk",
        "//prebuilts/tools/common/m2/repository/com/android/tools/build/transform-api/1.5.0:jar",
        "//prebuilts/tools/common/m2/repository/com/artemzin/rxjava/proguard-rules/1.1.0.0:aar",
        "//prebuilts/tools/common/m2/repository/com/automattic/rest/1.0.7:aar",
        "//prebuilts/tools/common/m2/repository/com/automattic/tracks/1.1.0:aar",
        "//prebuilts/tools/common/m2/repository/com/braintreepayments/api/braintree/2.3.6:aar",
        "//prebuilts/tools/common/m2/repository/com/braintreepayments/api/core/2.3.6:aar",
        "//prebuilts/tools/common/m2/repository/com/braintreepayments/encryption/2.1.0:jar",
        "//prebuilts/tools/common/m2/repository/com/cedarsoftware/java-util/1.24.0:jar",
        "//prebuilts/tools/common/m2/repository/com/cocoahero/android/geojson/1.0.1:jar",
        "//prebuilts/tools/common/m2/repository/com/crashlytics/sdk/android/crashlytics/2.6.7:aar",
        "//prebuilts/tools/common/m2/repository/com/crittercism/crittercism-android-agent/5.6.4:jar",
        "//prebuilts/tools/common/m2/repository/com/esotericsoftware/kryo/kryo/2.24.0:jar",
        "//prebuilts/tools/common/m2/repository/com/esotericsoftware/minlog/minlog/1.2:jar",
        "//prebuilts/tools/common/m2/repository/com/facebook/android/facebook-android-sdk/4.14.0:aar",
        "//prebuilts/tools/common/m2/repository/com/facebook/device/yearclass/yearclass/1.0.1:aar",
        "//prebuilts/tools/common/m2/repository/com/facebook/fresco/drawee/0.13.0:aar",
        "//prebuilts/tools/common/m2/repository/com/facebook/fresco/fbcore/0.13.0:aar",
        "//prebuilts/tools/common/m2/repository/com/facebook/fresco/fresco/0.13.0:aar",
        "//prebuilts/tools/common/m2/repository/com/facebook/fresco/imagepipeline-base/0.13.0:aar",
        "//prebuilts/tools/common/m2/repository/com/facebook/fresco/imagepipeline/0.13.0:aar",
        "//prebuilts/tools/common/m2/repository/com/facebook/rebound/rebound/0.3.8:jar",
        "//prebuilts/tools/common/m2/repository/com/facebook/stetho/stetho-okhttp/1.4.0:aar",
        "//prebuilts/tools/common/m2/repository/com/facebook/stetho/stetho-timber/1.4.0:aar",
        "//prebuilts/tools/common/m2/repository/com/facebook/stetho/stetho/1.4.0:aar",
        "//prebuilts/tools/common/m2/repository/com/facebook/testing/screenshot/core/0.2.3:aar",
        "//prebuilts/tools/common/m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.2.2:jar",
        "//prebuilts/tools/common/m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.6.0:jar",
        "//prebuilts/tools/common/m2/repository/com/fasterxml/jackson/core/jackson-core/2.2.2:jar",
        "//prebuilts/tools/common/m2/repository/com/fasterxml/jackson/core/jackson-core/2.6.6:jar",
        "//prebuilts/tools/common/m2/repository/com/fasterxml/jackson/core/jackson-databind/2.2.2:jar",
        "//prebuilts/tools/common/m2/repository/com/fasterxml/jackson/core/jackson-databind/2.6.6:jar",
        "//prebuilts/tools/common/m2/repository/com/fasterxml/jackson/dataformat/jackson-dataformat-cbor/2.6.6:jar",
        "//prebuilts/tools/common/m2/repository/com/firebase/firebase-client-android/2.5.2:jar",
        "//prebuilts/tools/common/m2/repository/com/firebase/firebase-client-jvm/2.5.2:jar",
        "//prebuilts/tools/common/m2/repository/com/firebase/tubesock/0.0.12:jar",
        "//prebuilts/tools/common/m2/repository/com/futuremind/recyclerfastscroll/fastscroll/0.2.4:aar",
        "//prebuilts/tools/common/m2/repository/com/githang/viewpagerindicator/2.5:aar",
        "//prebuilts/tools/common/m2/repository/com/github/ben-manes/gradle-versions-plugin/0.11.3:jar",
        "//prebuilts/tools/common/m2/repository/com/github/bumptech/glide/glide/3.6.1:jar",
        "//prebuilts/tools/common/m2/repository/com/github/bumptech/glide/okhttp-integration/1.3.1:jar",
        "//prebuilts/tools/common/m2/repository/com/github/chrisbanes/photoview/library/1.2.4:aar",
        "//prebuilts/tools/common/m2/repository/com/github/dcendents/android-maven-gradle-plugin/1.4.1:jar",
        "//prebuilts/tools/common/m2/repository/com/github/moduth/blockcanary-android/1.2.1:aar",
        "//prebuilts/tools/common/m2/repository/com/github/moduth/blockcanary-core/1.2.1:aar",
        "//prebuilts/tools/common/m2/repository/com/github/pwittchen/reactivenetwork/0.4.0:aar",
        "//prebuilts/tools/common/m2/repository/com/github/xizzhu/simple-tool-tip/0.5.0:aar",
        "//prebuilts/tools/common/m2/repository/com/google/android/apps/common/testing/accessibility/framework/accessibility-test-framework/2.1:jar",
        "//prebuilts/tools/common/m2/repository/com/google/android/exoplayer/exoplayer/r1.5.9:aar",
        "//prebuilts/tools/common/m2/repository/com/google/auto/auto-common/0.3:jar",
        "//prebuilts/tools/common/m2/repository/com/google/auto/auto-common/0.4:jar",
        "//prebuilts/tools/common/m2/repository/com/google/auto/auto-common/0.6:jar",
        "//prebuilts/tools/common/m2/repository/com/google/auto/service/auto-service/1.0-rc2:jar",
        "//prebuilts/tools/common/m2/repository/com/google/auto/value/auto-value/1.3:jar",
        "//prebuilts/tools/common/m2/repository/com/google/auto/value/auto-value/1.3-rc1:jar",
        "//prebuilts/tools/common/m2/repository/com/google/code/findbugs/jsr305/1.3.9:jar",
        "//prebuilts/tools/common/m2/repository/com/google/code/findbugs/jsr305/2.0.1:jar",  # TODO: single version.
        "//prebuilts/tools/common/m2/repository/com/google/code/gson/gson/2.6.2:jar",
        "//prebuilts/tools/common/m2/repository/com/google/code/gson/gson/2.8.0:jar",
        "//prebuilts/tools/common/m2/repository/com/google/dagger/dagger-compiler/2.6:jar",
        "//prebuilts/tools/common/m2/repository/com/google/dagger/dagger-compiler/2.7:jar",
        "//prebuilts/tools/common/m2/repository/com/google/dagger/dagger-producers/2.6:jar",
        "//prebuilts/tools/common/m2/repository/com/google/dagger/dagger-producers/2.7:jar",
        "//prebuilts/tools/common/m2/repository/com/google/dagger/dagger/2.6:jar",
        "//prebuilts/tools/common/m2/repository/com/google/dagger/dagger/2.7:jar",
        "//prebuilts/tools/common/m2/repository/com/google/dexmaker/dexmaker-mockito/1.0:jar",
        "//prebuilts/tools/common/m2/repository/com/google/dexmaker/dexmaker-mockito/1.2:jar",
        "//prebuilts/tools/common/m2/repository/com/google/dexmaker/dexmaker/1.0:jar",
        "//prebuilts/tools/common/m2/repository/com/google/dexmaker/dexmaker/1.2:jar",
        "//prebuilts/tools/common/m2/repository/com/google/guava/guava/18.0:jar",
        "//prebuilts/tools/common/m2/repository/com/google/guava/guava/19.0:jar",
        "//prebuilts/tools/common/m2/repository/com/google/guava/guava/20.0:jar",
        "//prebuilts/tools/common/m2/repository/com/google/protobuf/protobuf-java/2.6.1:jar",
        "//prebuilts/tools/common/m2/repository/com/googlecode/jarjar/jarjar/1.3:jar",
        "//prebuilts/tools/common/m2/repository/com/hannesdorfmann/mosby/mvp-common/2.0.1:jar",
        "//prebuilts/tools/common/m2/repository/com/hannesdorfmann/mosby/mvp/2.0.1:aar",
        "//prebuilts/tools/common/m2/repository/com/helpshift/android-helpshift-aar/4.7.0:aar",
        "//prebuilts/tools/common/m2/repository/com/ibm/icu/icu4j/53.1:jar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/butterknife-annotations/8.4.0:jar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/butterknife-compiler/8.4.0:jar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/butterknife/7.0.1:jar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/butterknife/8.4.0:aar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/rxbinding/rxbinding-appcompat-v7/1.0.0:aar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/rxbinding/rxbinding-design/1.0.0:aar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/rxbinding/rxbinding-leanback-v17/1.0.0:aar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/rxbinding/rxbinding-recyclerview-v7/1.0.0:aar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/rxbinding/rxbinding-support-v4/1.0.0:aar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/rxbinding/rxbinding/1.0.0:aar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/rxrelay/rxrelay/1.1.0:jar",
        "//prebuilts/tools/common/m2/repository/com/jakewharton/timber/timber/4.1.2:aar",
        "//prebuilts/tools/common/m2/repository/com/jayway/android/robotium/robotium-solo/5.5.3:jar",
        "//prebuilts/tools/common/m2/repository/com/joanzapata/iconify/android-iconify-fontawesome/2.1.1:aar",
        "//prebuilts/tools/common/m2/repository/com/joanzapata/iconify/android-iconify-material/2.1.1:aar",
        "//prebuilts/tools/common/m2/repository/com/joanzapata/iconify/android-iconify/2.1.1:aar",
        "//prebuilts/tools/common/m2/repository/com/koushikdutta/async/androidasync/2.1.3:jar",
        "//prebuilts/tools/common/m2/repository/com/lovedise/permissiongen/0.0.6:aar",
        "//prebuilts/tools/common/m2/repository/com/mcxiaoke/volley/library/1.0.10:jar",
        "//prebuilts/tools/common/m2/repository/com/mcxiaoke/volley/library/1.0.18:jar",
        "//prebuilts/tools/common/m2/repository/com/meetic/dragueur/dragueur/1.0.3:aar",
        "//prebuilts/tools/common/m2/repository/com/meetic/shuffle/shuffle/1.0.8:aar",
        "//prebuilts/tools/common/m2/repository/com/mixpanel/android/mixpanel-android/4.6.4:aar",
        "//prebuilts/tools/common/m2/repository/com/neenbedankt/gradle/plugins/android-apt/1.8:jar",
        "//prebuilts/tools/common/m2/repository/com/nineoldandroids/library/2.4.0:jar",
        "//prebuilts/tools/common/m2/repository/com/parse/bolts/bolts-android/1.4.0:jar",
        "//prebuilts/tools/common/m2/repository/com/parse/bolts/bolts-applinks/1.4.0:jar",
        "//prebuilts/tools/common/m2/repository/com/parse/bolts/bolts-tasks/1.4.0:jar",
        "//prebuilts/tools/common/m2/repository/com/paypal/android/sdk/data-collector/2.3.6:jar",
        "//prebuilts/tools/common/m2/repository/com/paypal/android/sdk/paypal-one-touch/2.3.6:aar",
        "//prebuilts/tools/common/m2/repository/com/ryanharter/auto/value/auto-value-gson/0.3.2-rc1:jar",
        "//prebuilts/tools/common/m2/repository/com/simperium/android/simperium/0.6.8:aar",
        "//prebuilts/tools/common/m2/repository/com/squareup/burst/burst-junit4/1.1.0:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/burst/burst/1.1.0:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/dagger/dagger-compiler/1.2.2:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/dagger/dagger/1.2.2:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/haha/haha/2.0.3:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/javapoet/1.2.0:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/javapoet/1.7.0:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/javawriter/2.1.1:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/leakcanary/leakcanary-analyzer/1.4:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/leakcanary/leakcanary-android/1.4:aar",
        "//prebuilts/tools/common/m2/repository/com/squareup/leakcanary/leakcanary-watcher/1.4:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/okhttp/mockwebserver/2.7.4:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/okhttp/okhttp-urlconnection/2.7.4:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/okhttp/okhttp-ws/2.7.4:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/okhttp/okhttp/2.7.2:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/okhttp/okhttp/2.7.4:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/okhttp3/okhttp/3.3.0:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/okhttp3/okhttp/3.4.1:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/okio/okio/1.6.0:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/okio/okio/1.8.0:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/okio/okio/1.9.0:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/picasso/picasso/2.5.2:jar",
        "//prebuilts/tools/common/m2/repository/com/squareup/retrofit2/retrofit/2.1.0:jar",
        "//prebuilts/tools/common/m2/repository/com/thoughtworks/xstream/xstream/1.4.7:jar",
        "//prebuilts/tools/common/m2/repository/com/thoughtworks/xstream/xstream/1.4.8:jar",
        "//prebuilts/tools/common/m2/repository/com/trello/rxlifecycle/0.6.1:aar",
        "//prebuilts/tools/common/m2/repository/com/uber/rave-compiler/0.6.0:jar",
        "//prebuilts/tools/common/m2/repository/com/uber/rave/0.6.0:jar",
        "//prebuilts/tools/common/m2/repository/com/yalantis/ucrop/2.2.0:aar",
        "//prebuilts/tools/common/m2/repository/com/yqritc/recyclerview-flexibledivider/1.2.6:aar",
        "//prebuilts/tools/common/m2/repository/commons-cli/commons-cli/1.2:jar",
        "//prebuilts/tools/common/m2/repository/commons-codec/commons-codec/1.4:jar",
        "//prebuilts/tools/common/m2/repository/commons-lang/commons-lang/2.4:jar",
        "//prebuilts/tools/common/m2/repository/de/greenrobot/eventbus/2.4.0:jar",
        "//prebuilts/tools/common/m2/repository/io/fabric/tools/gradle/1.22.1:jar",
        "//prebuilts/tools/common/m2/repository/io/opentracing/opentracing-api/0.13.0:jar",
        "//prebuilts/tools/common/m2/repository/io/opentracing/opentracing-impl/0.13.0:jar",
        "//prebuilts/tools/common/m2/repository/io/reactivex/rxandroid/1.1.0:aar",
        "//prebuilts/tools/common/m2/repository/io/reactivex/rxandroid/1.2.1:aar",
        "//prebuilts/tools/common/m2/repository/io/reactivex/rxjava-async-util/0.21.0:jar",
        "//prebuilts/tools/common/m2/repository/io/reactivex/rxjava/1.1.0:jar",
        "//prebuilts/tools/common/m2/repository/io/reactivex/rxjava/1.1.6:jar",
        "//prebuilts/tools/common/m2/repository/io/reactivex/rxjava/1.2.3:jar",
        "//prebuilts/tools/common/m2/repository/javax/annotation/javax.annotation-api/1.2:jar",
        "//prebuilts/tools/common/m2/repository/javax/annotation/jsr250-api/1.0:jar",
        "//prebuilts/tools/common/m2/repository/javax/inject/javax.inject/1:jar",
        "//prebuilts/tools/common/m2/repository/joda-time/joda-time/2.8.1:jar",
        "//prebuilts/tools/common/m2/repository/junit/junit/4.11:jar",
        "//prebuilts/tools/common/m2/repository/me/tatarka/gradle-retrolambda/3.2.4:jar",
        "//prebuilts/tools/common/m2/repository/me/tatarka/retrolambda/projectlombok/lombok.ast/0.2.3.a2:jar",
        "//prebuilts/tools/common/m2/repository/me/zhanghai/android/materialprogressbar/library/1.1.4:aar",
        "//prebuilts/tools/common/m2/repository/nekohtml/nekohtml/1.9.6.2:jar",
        "//prebuilts/tools/common/m2/repository/nekohtml/xercesMinimal/1.9.6.2:jar",
        "//prebuilts/tools/common/m2/repository/net/bytebuddy/byte-buddy-agent/1.6.5:jar",
        "//prebuilts/tools/common/m2/repository/net/bytebuddy/byte-buddy/1.6.5:jar",
        "//prebuilts/tools/common/m2/repository/net/orfjackal/retrolambda/retrolambda/2.0.6:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/ant/ant-launcher/1.8.0:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/ant/ant/1.8.0:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/commons/commons-lang3/3.4:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/httpcomponents/httpclient/4.1.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/httpcomponents/httpclient/4.5.2:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/httpcomponents/httpcore/4.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/httpcomponents/httpcore/4.4.4:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/logging/log4j/log4j-api/2.5:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/logging/log4j/log4j-core/2.5:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/maven-ant-tasks/2.1.3:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/maven-artifact-manager/2.2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/maven-artifact/2.2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/maven-error-diagnostics/2.2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/maven-model/2.2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/maven-plugin-registry/2.2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/maven-profile/2.2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/maven-project/2.2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/maven-repository-metadata/2.2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/maven-settings/2.2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/wagon/wagon-file/1.0-beta-6:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/wagon/wagon-http-lightweight/1.0-beta-6:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/wagon/wagon-http-shared/1.0-beta-6:jar",
        "//prebuilts/tools/common/m2/repository/org/apache/maven/wagon/wagon-provider-api/1.0-beta-6:jar",
        "//prebuilts/tools/common/m2/repository/org/assertj/assertj-core/2.6.0:jar",
        "//prebuilts/tools/common/m2/repository/org/bitbucket/b_c/jose4j/0.5.0:jar",
        "//prebuilts/tools/common/m2/repository/org/bouncycastle/bcprov-jdk15on/1.50:jar",
        "//prebuilts/tools/common/m2/repository/org/bouncycastle/bcprov-jdk16/1.46:jar",
        "//prebuilts/tools/common/m2/repository/org/ccil/cowan/tagsoup/tagsoup/1.2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/codehaus/plexus/plexus-container-default/1.0-alpha-9-stable-1:jar",
        "//prebuilts/tools/common/m2/repository/org/codehaus/plexus/plexus-interpolation/1.11:jar",
        "//prebuilts/tools/common/m2/repository/org/codehaus/plexus/plexus-utils/1.5.15:jar",
        "//prebuilts/tools/common/m2/repository/org/hamcrest/hamcrest-integration/1.3:jar",
        "//prebuilts/tools/common/m2/repository/org/hamcrest/hamcrest-library/1.3:jar",
        "//prebuilts/tools/common/m2/repository/org/jacoco/org.jacoco.agent/0.7.4.201502262128:jar",
        "//prebuilts/tools/common/m2/repository/org/jacoco/org.jacoco.agent/0.7.5.201505241946:jar",
        "//prebuilts/tools/common/m2/repository/org/jacoco/org.jacoco.core/0.7.5.201505241946:jar",
        "//prebuilts/tools/common/m2/repository/org/jacoco/org.jacoco.report/0.7.5.201505241946:jar",
        "//prebuilts/tools/common/m2/repository/org/javassist/javassist/3.19.0-GA:jar",
        "//prebuilts/tools/common/m2/repository/org/jboss/forge/roaster/roaster-api/2.18.7.Final:jar",
        "//prebuilts/tools/common/m2/repository/org/jboss/forge/roaster/roaster-jdt/2.18.7.Final:jar",
        "//prebuilts/tools/common/m2/repository/org/jdeferred/jdeferred-android-aar/1.2.2:aar",
        "//prebuilts/tools/common/m2/repository/org/jdeferred/jdeferred-android-aar/1.2.3:aar",
        "//prebuilts/tools/common/m2/repository/org/jdeferred/jdeferred-core/1.2.2:jar",
        "//prebuilts/tools/common/m2/repository/org/jdeferred/jdeferred-core/1.2.3:jar",
        "//prebuilts/tools/common/m2/repository/org/jetbrains/kotlin/kotlin-stdlib-jre7/1.1.3-2:jar",
        "//prebuilts/tools/common/m2/repository/org/jetbrains/kotlin/kotlin-stdlib-jre8/1.1.3-2:jar",
        "//prebuilts/tools/common/m2/repository/org/json/json/20141113:jar",
        "//prebuilts/tools/common/m2/repository/org/jsoup/jsoup/1.7.3:jar",
        "//prebuilts/tools/common/m2/repository/org/mockito/mockito-core/1.10.19:jar",
        "//prebuilts/tools/common/m2/repository/org/mockito/mockito-core/2.7.1:jar",
        "//prebuilts/tools/common/m2/repository/org/objenesis/objenesis/2.1:jar",
        "//prebuilts/tools/common/m2/repository/org/objenesis/objenesis/2.5:jar",
        "//prebuilts/tools/common/m2/repository/org/ow2/asm/asm-commons/5.0.1:jar",
        "//prebuilts/tools/common/m2/repository/org/ow2/asm/asm-debug-all/5.0.1:jar",
        "//prebuilts/tools/common/m2/repository/org/ow2/asm/asm-tree/5.0.1:jar",
        "//prebuilts/tools/common/m2/repository/org/ow2/asm/asm/5.0.1:jar",
        "//prebuilts/tools/common/m2/repository/org/reflections/reflections/0.9.10:jar",
        "//prebuilts/tools/common/m2/repository/org/robolectric/android-all/7.0.0_r1-robolectric-0:jar",
        "//prebuilts/tools/common/m2/repository/org/robolectric/robolectric-annotations/3.3.2:jar",
        "//prebuilts/tools/common/m2/repository/org/robolectric/robolectric-junit/3.3.2:jar",
        "//prebuilts/tools/common/m2/repository/org/robolectric/robolectric-resources/3.3.2:jar",
        "//prebuilts/tools/common/m2/repository/org/robolectric/robolectric-sandbox/3.3.2:jar",
        "//prebuilts/tools/common/m2/repository/org/robolectric/robolectric-utils/3.3.2:jar",
        "//prebuilts/tools/common/m2/repository/org/robolectric/robolectric/3.3.2:jar",
        "//prebuilts/tools/common/m2/repository/org/robolectric/shadow-api/3.3.2:jar",
        "//prebuilts/tools/common/m2/repository/org/robolectric/shadows-core/3.3.2:jar",
        "//prebuilts/tools/common/m2/repository/org/shredzone/flattr4j/flattr4j-core/2.12:jar",
        "//prebuilts/tools/common/m2/repository/org/slf4j/slf4j-api/1.7.2:jar",
        "//prebuilts/tools/common/m2/repository/org/slf4j/slf4j-api/1.7.5:jar",
        "//prebuilts/tools/common/m2/repository/org/slf4j/slf4j-api/1.7.6:jar",
        "//prebuilts/tools/common/m2/repository/org/thoughtcrime/ssl/pinning/AndroidPinning/1.0.0:aar",
        "//prebuilts/tools/common/m2/repository/org/threeten/threetenbp/1.3.3:jar",
        "//prebuilts/tools/common/m2/repository/org/wordpress/drag-sort-listview/0.6.1:aar",
        "//prebuilts/tools/common/m2/repository/org/wordpress/emailchecker2/1.1.0:aar",
        "//prebuilts/tools/common/m2/repository/org/wordpress/graphview/3.4.0:aar",
        "//prebuilts/tools/common/m2/repository/org/wordpress/mediapicker/1.2.4:aar",
        "//prebuilts/tools/common/m2/repository/org/wordpress/passcodelock/1.3.0:aar",
        "//prebuilts/tools/common/m2/repository/org/wordpress/persistentedittext/1.0.1:aar",
        "//prebuilts/tools/common/m2/repository/org/wordpress/slidinguppanel/1.0.0:aar",
        "//prebuilts/tools/common/m2/repository/uk/co/chrisjenx/calligraphy/2.2.0:aar",
        "//prebuilts/tools/common/m2/repository/xmlpull/xmlpull/1.1.3.1:jar",
        "//prebuilts/tools/common/m2/repository/xpp3/xpp3_min/1.1.4c:jar",
        "//tools/base/testing-infrastructure/device-pool/device-provider",  # TODO: neverlink
        "//tools/base/third_party:junit_junit",
        "//tools/base/third_party:org.jetbrains.kotlin_kotlin-gradle-plugin",
    ],
)
