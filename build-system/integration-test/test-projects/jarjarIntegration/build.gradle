apply from: "../commonHeader.gradle"
buildscript { apply from: "../commonBuildScript.gradle" }


if (buildToolsVersion < '21.0.0') {
    println ("Warning : this sample requires build-tools version 21 or above")
}

apply plugin: 'com.android.application'

android {
  namespace "com.android.tests.basic"
  compileSdkVersion 24 // TODO: b/120411432 (was rootProject.latestCompileSdk)
  buildToolsVersion = rootProject.buildToolsVersion

  defaultConfig {
    versionCode 12
    minSdkVersion 16
    //noinspection ExpiringTargetSdkVersion,ExpiredTargetSdkVersion
    targetSdkVersion 20
  }
}

import com.android.test.jarjar.JarJarTask
import com.android.build.api.variant.ScopedArtifacts
import com.android.build.api.artifact.ScopedArtifact

androidComponents {
    onVariants(selector().withBuildType("debug"), { variant ->
        TaskProvider<JarJarTask> taskProvider = project.tasks.register(variant.getName() + "JarJar", JarJarTask.class)
        variant.artifacts
                .forScope(ScopedArtifacts.Scope.ALL)
                .use(taskProvider)
                .toTransform(
                        ScopedArtifact.CLASSES.INSTANCE,
                        { it.getInputJars() },
                        { it.getInputDirectories() },
                        { it.getOutput() }
                )
    })
}

apply from: "../commonLocalRepo.gradle"

dependencies {
  api 'com.google.code.gson:gson:2.8.6'
}
