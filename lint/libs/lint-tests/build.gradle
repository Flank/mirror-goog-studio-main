apply plugin: 'com.android.tools.java-library'
apply plugin: 'com.android.tools.kotlin'
apply plugin: 'com.android.tools.publish'

group = 'com.android.tools.lint'
archivesBaseName = 'lint-tests'
version = rootProject.ext.baseVersion

dependencies {
    implementation project(':base:lint-cli')
    implementation project(':base:lint-gradle')
    implementation project(':base:intellij-core')
    implementation project(':base:kotlin-compiler')
    implementation project(':base:uast')
    implementation project(':base:layoutlib-api')
    implementation project(':base:sdk-common')
    implementation project(':base:common')
    implementation project(':base:sdklib')
    implementation libs.junit
    implementation libs.asm
    implementation libs.asm_tree
    implementation libs.groovy
    implementation libs.mockito_core
    implementation libs.kxml

    testImplementation project(':base:testutils')
    testImplementation project(':analytics-library:shared')
    testImplementation project(':analytics-library:protos')
    testImplementation project(':analytics-library:tracker')
    testImplementation project(':analytics-library:testing')
    testImplementation project(':base:apkparser:binary-resources')
    testImplementation project(':base:apkparser:apkanalyzer')
    testImplementation libs.gson
    testImplementation libs.truth
    testImplementation libs.kxml
    testImplementation files(toolsJarForJava8)
    testImplementation testFixtures(project(":base:repository"))
    testImplementation testFixtures(project(":base:common"))
}

sourceSets {
    main.resources.srcDir 'src/main/java'
    test.resources.srcDir 'src/test/java'
}

project.ext.pomName = 'Android Tools Lint Test API'
project.ext.pomDesc = 'API to build lint check tests'

test {
    jvmArgs '-Djdk.attach.allowAttachSelf=true'
    maxHeapSize = "2048m"
}
